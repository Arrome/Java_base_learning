# README

类加载过程
--------

##### 加载
**将class文件字节码内容加载到内存中，将静态数据转换为方法区中运行时数据结构，
在堆中生成一个代表这个类的`java.lang.Class`对象，作为方法区类数据的访问入口。**<br>

##### 链接
将Java类的二进制代码合并到JVM的运行状态中的过程<br>

* 验证：确保加载的类信息符合JVM规范，没有安全方面问题
* 准备：正式为类变量（static变量）分配内存，都在方法区进行分配，并设置变量初始值(一般为数据类型的零值)
* 解析：虚拟机常量池里的符号引用替换为直接引用的过程（地址引用）

##### 初始化
执行类构造器`<clinit>()`方法（有static变量或语句块的类，编译器为其生成）的过程<br>

* `<clinit>()`方法是由编译器自动收集类中所有类变量（static变量）的赋值动作和静态语句块（static{}）的语句合并产生<br>
    编译器收集顺序： **根据语句在源文件中出现的顺序决定**<br>
    **静态语句块只能访问到定义在其前的变量，之后的变量静态语句块可以赋值，不能访问**<br>
* 虚拟机保证在子类`<clinit>()`方法执行之前，父类的`<clinit>()`方法已经执行完
* 虚拟机保证`<clinit>()`多线程安全


类加载（主动引用&被动引用）
--------
1. 类主动引用（一定进行初始化）
    * new 创建对象
    * 调用静态变量（final常量除外）或静态方法
    * 使用`java.lang.reflection`对类进行反射调用
    * 初始化类，如果其父类未初始化，先初始化父类
    * 虚拟机启动，加载main函数时

2. 类被动引用(一定不会进行初始化)
    * 调用静态域，只有实际声明的类才初始化（子类引用父类的静态域）
    * 数组
    * 引用常量（final）

类加载器
-------
* 启动类加载器（Bootstrap ClassLoader）
* 扩展类加载器（Extension ClassLoader）
* 应用程序加载器（Application ClassLoader）
* 自定义类加载器